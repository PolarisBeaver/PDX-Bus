<HTML>
<head>
<title>PDX Bus 6.0.1 sources</title>
<BODY>
<center>
<img src="RobAlan/AppIcon-72.png">
<H1>PDX Bus 6.0.1 sources</H1>
</center>

<center><h1><a href="http://www.teleportaloo.org/pdxbus/src/PDXBusSrc.zip">Download</a></h1></center>


<p>I am making the sources to PDX Bus version 6.0.1 available as part of the 
<a href="http://www.civicapps.org">Civic Apps</a> competition.  These
sources were developed by me from Apple samples and documentation, except 
where explicitly mentioned in the code.  

I am choosing to release a copy of the code under the <a href="http://www.mozilla.org/MPL/">MPL 1.1</a> License but I retain the copyright,
which enables me to release the iPhone app under the regular Apple iPhone license
(this avoids any conflict of licenses for the time being).
 (No outside MPL or GPL code has been incorporated into the
code, some BSD License has been included, it is clearly marked).  However - this really is the exact same code that was used to build the app, and 
I will continue to release the code for all future releases (the method of release may change).
</p>
<p>I regret that I probably do not have the time to answer general support questions 
about iPhone application development - all you need to know can be found at 
<a href="http://developer.apple.com">http://developer.apple.com</a>.
(You need a Mac to develop for the iPhone, you will also need to purchase a 
$100 membership to get a certificate to put an application on
an actual device).
</p>
<p>
Because I wish to retain the copyright on the code, I am currently not
yet collaborating on development - but this may change as I work out
how open source iPhone development can work.

Of course this code can be used as a reference 
and in other code, but be sure to comply with the license! This code was 
written initially as a fun learning project for me to learn Objective-C, and 
has grown from there.  There may be better, more efficient, cleaner, more 
elegent or more correct ways to do all of it, but this is what I came up with 
in my spare time, and it gets the job done.  I am working on tidying it up 
to enable it to be of more use.</p>

<h2>Links</h2>
<ul>
<li><a href="http://pdxbus.teleportaloo.org">PDX Bus Blog</a></li>
<li><a href="http://phobos.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=289814055&mt=8">PDX Bus in the iTunes store</a></li>
<li><a href="http://twitter.com/pdxbus">PDX Bus on Twitter</a>
<li><a href="http://www.teleportaloo.org/pdxbus/src">PDX Bus Sources download page</a>
</ul>

<h2>Things to know before building</h2>
<ul>
<li>PDX Bus is built with iPhone SDK 4.3 and Xcode 4.1 - available free 
from <a href="http://developer.apple.com">http://developer.apple.com</a>/
<li>Before building this code you will need to register with TriMet 
to get a free "AppID" at 
<a href="http://developer.trimet.org/registration/">http://developer.trimet.org/registration/</a>,
this is so that TriMet can track who is using their API. The AppID is 
placed in TriMetTypes.h as the #define TRIMET_APP_ID.  Without this id 
the application will not work, the code will not compile until this is addressed.</li>
<li>For licensing reasons, some graphics are not included with this source 
(see below).</li>
<li>Other graphics are included under Creative Commons Licenses - please check the folders for the particular licenses used.</li>
<li>The data feed from Next Bus 
<a href="http://www.civicapps.org/datasets/portland-streetcar-routes-arrivals">http://www.civicapps.org/datasets/portland-streetcar-routes-arrivals</a> 
has terms and conditions (including a non-commercial clause) but does 
not need an application ID.</li>
</li>
<li>Yahoo Place Finder can be used to do Reverse Geo Coding on GPS coordinates.  This also needs a free API key which is not included
- you will need to register with Yahoo here - <a href="http://developer.yahoo.com/geo/placefinder/">http://developer.yahoo.com/geo/placefinder/</a> - for this to be utilized - otherwise the code will fall back to GeoNames.org. 
</ul>

<h2>Graphics</h2>
This source distribution builds and runs, but the project will not attempt 
to copy any missing graphics files into the application package.  
If you download the graphics from the sources below, you must enable 
the project to copy them into the application. 

<h3>TriMet Graphics</h3>
Two graphics files were provided to me by permission of TriMet, and should 
be placed in the TriMet folder and then assigned to the target in the Xcode project <a href="#Xcode">(see below)</a>.
PDX Bus will work without them, except the Rail Map will not be displayed.
<ul>
<li>The visittrimeticon.gif file is available from the TriMet page about linking:  
<a href="http://www.trimet.org/help/linking.htm">http://www.trimet.org/help/linking.htm</a>.</li>
<li>The map of the rail system, railsystem.gif, is a 2000x765 gif file made 
from the PDF of the rail map.  
(The size here is important for the positioning of the hotspots). The original 
file is available here -
 <a href="http://www.trimet.org/maps/railsystem.htm">http://www.trimet.org/maps/railsystem.htm</a> 
 - I was granted special permission to use it for PDX Bus with a disclaimer - 
 you will need to ask permission if you want to distribute it
 in some way.  Note that I took the PDF and made the GIF file - the GIF 
 file provided by TriMet is too small
 and will not work.</li>
</ul>

<h3>Enabling the project to use the graphics</h3>
<a name="Xcode">
Once the graphics have been downloaded and copied into place you will need to enable 
them in the project.</a>
<ul>
<li>In the Xcode project, under Resouces you will find the Aha-Soft, 
TriMet and Glyphish folders. The file names
will be red for any missing files.</li>
<li>For files that are not red, select them all, CTRL-Click then 
choose "Get Info" from the pop-up menu.</li>
<li>On the Info dialog box, click on the Targets tab, and select 
"PDX Bus".</li>
</ul>

<h3>Creative Commons Attributions</h3>

<ul>
<li>Aha-Soft - some graphics files from Aha-Soft are used under a 
<a href="http://creativecommons.org/licenses/by/3.0/us/">Creative Commons Attribution-Share Alike 3.0 License</a>. These files are in a separate folder with attributions:<br>
Attribution:  <a href="http://www.small-icons.com/packs/24x24-free-application-icons.htm">http://www.small-icons.com/packs/24x24-free-application-icons.htm</a>.<br>
Attribution:  <a href="http://www.small-icons.com/packs/48x48-free-time-icons.htm">http://www.small-icons.com/packs/48x48-free-time-icons.htm</a>.<br>
Attribution:  <a href="http://www.small-icons.com/packs/48x48-free-object-icons.htm">http://www.small-icons.com/packs/48x48-free-object-icons.htm</a>.<br>
</li>
<li>Glyphish Attribution - some graphics files from Gliphish.com are used under a
<a href="http://creativecommons.org/licenses/by/3.0/us/">Creative Commons Attribution-Share Alike 3.0 License</a>.
These files are in a separate folder with attribution - <a href="http://glyphish.com">Icons by Joseph Wain / glyphish.com</a>.
The high-resolution retina toolbar icons are not redistributable so are not included in this distrubution.
</li>

</li>
<li>Rob Alan Attribution - some graphics files from Rob Alan are used under a
<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 License</a>.
These files are in a separate folder with attribution - <a href="http://robalan.com">App Icon by Rob Alan</a>.
</li>

<li>The Working Group Attribution - some graphics files from The Working Group are from <a href="http://blog.twg.ca/2009/09/free-iphone-toolbar-icons/">The Working Group</a> and are used under a 
<a href="http://creativecommons.org/licenses/by/3.0/us/">Creative Commons Attribution-Share Alike 3.0 License</a>.
</li>


<li>Oxygen Attribution - some graphics files from Oxygen-Icons.org are from <a href="http://www.oxygen-icons.opg/">Oxygen Icons</a> and are used under a 
<a href="http://creativecommons.org/licenses/by/3.0/us/">Creative Commons Attribution-Share Alike 3.0 License</a>.
</li>
    
<li>Mike Koenig Attribution - the Train Honk file is from Mike Koenig and are used under a 
    <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution License</a> - location  <a href="http://soundbible.com/1695-Train-Honk-Horn-2x.html">soundbible.com</a>.
</li>
</ul>
    
    
<br>
<br>

<h3>Change log</h3>

<h4>Version 6.0.1</h4>
<ul>
    <li>Updated PGE Park to JELD-WEN Field on the map.  Go Timbers!</li>
    
</ul>    
<h4>Version 6.0</h4>
<li>Fixed locate nearby stops so that GPS cannot be left on.</li>
<ul>
<li>Updated PGE Park to JELD-WEN Field on the map.  Go Timbers!</li>
<li>Added 'commuter bookmarks' - any bookmark can be configured to automatically display
    on your morning or evening commute.</li>
<li>Added a proximity alarm to alert you when you get close to a stop (iOS 4.0 and above).</li>
<li>Added an arrival alarm to alert you when a bus or train is getting close (iOS 4.0 and above).</li>
<li>Added 'Plan trip from here' option to arrival screen.</li>
<li>Arrivals have an arrow to expand the rows to include extra menu items for each stop.</li>
<li>Locate by route now allows multiple route selection.</li>
<li>Updated network error processing.</li>
<li>Added in-app settings which are the same as the Settings app settings.</li>
<li>Updated many user interface elements, including: reverse button on trip planner.</li>
<li>Bug fixes - now loads on iOS5.</li>
</ul>    

<h4>Version 5.2</h4>
<ul>
<li>User requested changes:</li>
<ul>
<li>Arrival screen now shows  the scheduled time in addition to the estimated time (so you can tell if a bus is running late or early).   The arrival time screen has been adjusted to make space for this (e.g. arrivals are not shown to the nearest second and a button has been removed).The find stop by location feature has been updated to be more flexible and have more options (such as showing the nearest routes and going straight to a map).</li>
<li>The "busy" screen has been updated to show what stop is being downloaded.</li>
<li>Added a very large font Bus Line identifier screen. This is intended as an alternative to the large-print book provided to partially sighted travelers to let the operator know which bus they need to board.</li>
</ul>
<li>Other updates:</li>
<ul>
<li>Updated the rail map to include Bike &amp; Ride Info.</li>
<li>Added a Facebook Fan Page.</li>
<li>Added a few more retina graphics.</li>
<li>Several bug fixes and new settings (to work around a continuous refresh issue).</li>
<li>Phone will not go to sleep while showing the Night Visibility Flashing Light (user is warned). </li>
</ul>
</ul>


<h4>Version 5.1</h4>
<ul>
<li>Updated to use TriMet's new location services API, removing the need for the stop location database (saving about 230K).</li>
<li>Added new hi-res icons for the retina display.</li>
<li>Bug fixes: e.g. fixed ability to add user-entered IDs to bookmarks.</li>
</ul>
<h4>Version 5.0</h4>
<ul>
<li>Trips can now be bookmarked and then re-planned with a single touch. Check out the bookmark icon in the toolbar on the trip screen.  Tip:  bookmark a trip from the Current Location to your home and call it "Take me home!"</li>
<li>The Trip planner user interface has a new more intuitive flow, and the map has a previous/next button to step through the trip. </li>
<li>Trips are automatically saved to a new "Recent Trips" screen and can be viewed later without a network connection.</li>
<li>Trips can be texted to other cell phone users directly from inside PDX Bus (requires an iPhone with iOS 4.0).</li>
<li>Trips can be added as events to the calendar (iOS 4.0 required).</li>
<li>Trips planned using the GPS now show the location's name instead of 'Current Location'.</li>
<li>Added 'Search rail stations' screen.</li>
<li>Rail arrivals include a colored circle to indicate the line.</li>
<li>Stops can be sorted alphabetically.</li>
<li>Recent stops now have their own screen.</li>
<li>Added up/down arrows to the rider alerts and fixed fonts sizes.</li>
<li>Settings now update instantly in iOS4;  added Color Themes and made it blue by default.</li>
</ul>
<h4>Version 4.2.1</h4>
<ul>
<li>Stylish new icon</li>
<li>Updated attributions (including Civic App award!)</li>
<li>Minor bug fixes</li>
<li>Fixed issue with some Streetcar stops giving the wrong arrivals (e.g. Stop ID 12375).</li>
</ul>

<h4>Version 4.2</h4>
<ul><li>Support for iOS4 and fast switching between apps. Regular features are designed to work on all models of iPhone, iPad and iPod touch running OS version 3.0 and above.</li>
<li>The current location "blue dot" is now shown on all maps.</li>
<li>The tip planner map now shows the actual route of the busses and trains.</li>
<li>Fixed usability issue with bookmarks - the bookmark icon can be used to edit or delete an existing bookmark was well as to add one.</li>
<li>Routes, directions and stop names are cached until the end of each day (or optionally until the end of the week).  (TriMet tells me that routes only change at midnight - mostly they change weekly on Sunday but occasionally they change mid-week).</li>
<li>Multiple bug fixes and tweaks (e.g.  fixed iPhone font issues introduced when adding iPad support, fixed different behavior of home button).</li>
</ul>
<h4>Version 4.1</h4>
First Open Source Version.
<br><br>

<b>HAVE FUN!</b>
<br><br>
Andrew Wallace, June 2011.
</BODY>
</HTML>
